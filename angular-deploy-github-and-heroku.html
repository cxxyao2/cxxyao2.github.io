<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deploy</title>
  <meta name="description" content="Angular React github heroku" />
  <meta name="author" content="Jennifer" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="icon" href="/assets/images/favicon.ico" />
  <link rel="stylesheet" href="assets/css/normalize.css" />
  <link rel="stylesheet" href="assets/css/index.css" />
</head>

<body>
  <!--  for not index.html -->
  <nav class="nav collapsible">
    <span><a href="/#angular" class="white">Jennifer - Full Stack Developer</a> </span>
    <span class="nav_toggler" style="outline:none !important;"><i class="fa fa-list white icon-bigger"></i></span>
    <ul class="nav_list collapsible_content">
      <li>
        <ul class="nav_social" role="nav_social">
          <li>
            <a href="https://github.com/cxxyao2" target="_blank"><i class="fa fa-github white icon-biggest"></i></a>
          </li>
          <li>
            <a href="https://twitter.com/jenniferyao1996" target="_blank"><i
                class="fa fa-twitter white icon-biggest"></i></a>
          </li>
          <li>
            <a href="mailto:jenniferyao1996#hotmail.com" target="_blank"><i
                class="fa fa-envelope white icon-biggest"></i></a>
          </li>
        </ul>
      </li>
      <li class="nav_item"><a href="/#angular">Angular</a></li>
      <li class="nav_item"><a href="/#react">React</a></li>
      <li class="nav_item"><a href="/#webpack">Webpack</a></li>
      <li class="nav_item"><a href="/#database">Database</a></li>
    </ul>
  </nav>





  <!--  for not index.html -->
  <aside class="sidebar">
    <div class="sidebar_cover"></div>
    <div class="sidebar_main">
      <a href="#">
        <img class="sidebar_logo" alt="Jennifer" src="assets/tree1.jpg" />
      </a>
      <h3>Jennifer</h3>
      <span>Full Stack Developer</span>
      <hr />
      <p class="sidebar_description">
        A liftlong learner. Keep learning, keep evoving in IT industry.
      </p>
      <hr class="sidebar_divider" />
      <p class="sidebar_tags">
        <span class="sidebar_tag"><a href="/#angular"><img src="assets/angular-icon.svg"
              class="sidebar_icon" />&nbsp;Angular</a></span>
        <span class="sidebar_tag"><a href="/#react" alt="react blogs"><img src="assets/react.svg"
              class="sidebar_icon" />&nbsp;React</a></span>
        <span class="sidebar_tag"><a href="/#webpack"><img src="assets/webpack_logo.svg"
              class="sidebar_icon" />&nbsp;Webpack</a></span>
        <span class="sidebar_tag"><a href="/#database"><img src="assets/mysql.png"
              class="sidebar_icon" />Backend</a></span>
      </p>
      <hr class="sidebar_divider" />
      <div>
        <ul class="navigation" role="navigation-social">
          <li class="navigation_item">
            <a href="https://github.com/cxxyao2" target="_blank"><i class="fa fa-github icon-bigger"></i></a>
          </li>
          <li class="navigation_item">
            <a href="https://twitter.com/jenniferyao1996" target="_blank"><i class="fa fa-twitter icon-bigger"></i></a>
          </li>
          <li class="navigation_item">
            <a href="mailto:jenniferyao1996#hotmail.com" target="_blank"><i class="fa fa-envelope icon-bigger"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </aside>


  <main class="content_wrapper">
    <div class="content">
      <article class="post">
        <header>
          <span class="post_category"><span class="date">2021-2-1</label> Angular</span>
            <h2>Deploy Angular to GitHub and Heroku</h2>
        </header>
        <section class="post_body">
          <div class="alert is-helpful">
            Before all the deployments, run <code>ng build --prod</code>
          </div>
          <h3>1. Deploy Angular to Github</h3>
          <p>we need only 2 steps for deploying an angular app on Github.</p>

          <ol>
            <li><code>ng add angular-cli-ghpages</code></li>
            <li><code>ng deploy
                  --base-href=https://your-github-username.github.io/your-project-name-in-github/
                </code>
            </li>
          </ol>
          <p> Now, we could admire the result with a cup of coffer<i class="fa fa-coffee icon-bigger"></i>.&nbsp;
            <a href="https://cxxyao2.github.io/ng-demo/">Here!&nbsp;</a>
            Deployment is more easy than you think, non?
          </p>

          <p><i class="fa fa-arrow-right"></i>Source hosted on github&nbsp;<a
              href="https://github.com/cxxyao2/ng-demo/">ng-demo</a> </p>
          <div class="alert is-important">
            The ending slash &nbsp;/ &nbsp; is necessary;&nbsp;Image source path should be written correctly &nbsp;
            <code>&lt;img src="./assets/answer1.jpeg" /&gt;</code>
          </div>
          <hr class="divider" />
          <h3>2. Deploy Angular to Heroku Cloud Platform</h3>
          <p>on the dashboard of Heroku
          <ol>
            <li>create a new app</li>
            <li>choose Github integration</li>
            <li>after Heroku has found the repo in git, click "connect" button</li>
            <li>click "enable automatic deploy" button</li>
          </ol>
          </p>
          <p>on your local machine, at the root folder of angular project
          <ol>
            <li><code>npm i express --save</code></li>
            <li>write a file named server.js. My project name is "ng-front". Please replace it by your own project
              name.&nbsp
              <pre>
// get environment variables dynamically and create environment.ts file
const fs = require("fs");
const targetPath = "./src/environments/environment.ts";
const envConfigFile = `export const environment = {
  apiBaseUrl: '${process.env.API_BASE_URL}',
  apiUrl: '${process.env.API_URL}',
  appName: '${process.env.APP_NAME}',
  awsPubKey: '${process.env.AWSKEY}',
  nodeEnv: '${process.env.NODE_ENV}',
  production: '${process.env.PRODUCTION}'
};
`;
fs.writeFile(targetPath, envConfigFile, function (err) {
  if (err) {
    throw console.error(err);
  } else {
    console.log(
      `Angular environment.ts file generated correctly at ${targetPath} \n`
    );
  }
});

const express = require("express");
const app = express();
app.use(express.static(__dirname + "/dist/ng-front")); // serve our static files

// direct all of the requests to index.html
app.all("/*", (req, res) => {
  res.status(200).sendFile(__dirname + "/dist/ng-front/index.html");
});
app.listen(process.env.PORT || 8080);
</pre>
            </li>
            <li>modify package.json
              <pre>
"scripts": {
  "ng": "ng",
  "start": "node server.js",
  "build": "ng build --prod",
  "test": "ng test",
  "lint": "ng lint",
  "e2e": "ng e2e"
},
              </pre>
            </li>
            <li>in the local machine, run <code>node server.js</code>.
              Enter "localhost:8000" in the browser to verify if the configuration is ok </li>
            <li>until now, if there is no problem, we can push the latest code and configure the project to Github.
              In the terminal, <code>git push origin main</code>.
            </li>
          </ol>
          </p>
          <p> Now, we could admire the result with a cup of coffer<i class="fa fa-coffee icon-bigger"></i>.&nbsp;
            <a href="https://ngcrm2021.herokuapp.com/">Here!&nbsp;</a>
            Deployment is more easy than you think, non?
          </p>
          <p><i class="fa fa-arrow-right"></i>Source hosted on github&nbsp;<a
              href="https://github.com/cxxyao2/ng-Front-end">ng-Front-end</a> </p>

        </section>
      </article>
      <section class="read-more">
        <div class="read-more_item">
          <span class="read-more-item-dim">&lt;&lt;previous article</span>
          <h3><a href="angular_server_side_render_deploy.html">Deploy Server Side Rendering with Angular Universal and
              Firebase Functions</a></h3>
        </div>
        <div class="read-more_item">
          <span class="read-more-item-dim">next article&gt;&gt;</span>
          <h3><a href="angular-debug-in-vscode-chrome.html">Debug Angular in VSCode and Chrome</a></h3>
        </div>
      </section>

      <section class="footer">
        <span class="footer__copyright">2021-5-31 Jennifer. All rights reserved.</span>
        <span class="footer__copyright">Contact Email: Jenniferyao1996#hotmail.com</span>
      </section>
    </div>
    <span id="backToTop">
      <i class="fa fa-arrow-up"></i>
    </span>
  </main>
  <script src="main.js"></script>
</body>

</html>