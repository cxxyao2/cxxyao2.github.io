<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Improve performance in Angular</title>
  <meta name="description" content="performance Front-end React RxJS  Angular " />
  <meta name="author" content="Jennifer" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="icon" href="/assets/images/favicon.ico" />
  <link rel="stylesheet" href="assets/css/normalize.css" />
  <link rel="stylesheet" href="assets/css/index.css" />
</head>

<body>
  <!--  for not index.html -->
  <nav class="nav collapsible">
    <span><a href="/#angular" class="white">Jennifer - Full Stack Developer</a>
    </span>
    <span class="nav_toggler" style="outline: none !important"><i class="fa fa-list white icon-bigger"></i></span>
    <ul class="nav_list collapsible_content">
      <li>
        <ul class="nav_social" role="nav_social">
          <li>
            <a href="https://github.com/cxxyao2" target="_blank"><i class="fa fa-github white icon-biggest"></i></a>
          </li>
          <li>
            <a href="https://twitter.com/jenniferyao1996" target="_blank"><i
                class="fa fa-twitter white icon-biggest"></i></a>
          </li>
          <li>
            <a href="mailto:jenniferyao1996#hotmail.com" target="_blank"><i
                class="fa fa-envelope white icon-biggest"></i></a>
          </li>
        </ul>
      </li>
      <li class="nav_item"><a href="/#angular">Angular</a></li>
      <li class="nav_item"><a href="/#react">React</a></li>
      <li class="nav_item"><a href="/#webpack">Webpack</a></li>
      <li class="nav_item"><a href="/#database">Database</a></li>
    </ul>
  </nav>

  <!--  for not index.html -->
  <aside class="sidebar">
    <div class="sidebar_cover"></div>
    <div class="sidebar_main">
      <a href="#">
        <img class="sidebar_logo" alt="Jennifer" src="assets/tree1.jpg" />
      </a>
      <h3>Jennifer</h3>
      <span>Full Stack Developer</span>
      <hr />
      <p class="sidebar_description">
        A liftlong learner. Keep learning, keep evoving in IT industry.
      </p>
      <hr class="sidebar_divider" />
      <p class="sidebar_tags">
        <span class="sidebar_tag"><a href="/#angular"><img src="assets/angular-icon.svg"
              class="sidebar_icon" />&nbsp;Angular</a></span>
        <span class="sidebar_tag"><a href="/#react" alt="react blogs"><img src="assets/react.svg"
              class="sidebar_icon" />&nbsp;React</a></span>
        <span class="sidebar_tag"><a href="/#webpack"><img src="assets/webpack_logo.svg"
              class="sidebar_icon" />&nbsp;Webpack</a></span>
        <span class="sidebar_tag"><a href="/#database"><img src="assets/mysql.png"
              class="sidebar_icon" />Backend</a></span>
      </p>
      <hr class="sidebar_divider" />
      <div>
        <ul class="navigation" role="navigation-social">
          <li class="navigation_item">
            <a href="https://github.com/cxxyao2" target="_blank"><i class="fa fa-github icon-bigger"></i></a>
          </li>
          <li class="navigation_item">
            <a href="https://twitter.com/jenniferyao1996" target="_blank"><i class="fa fa-twitter icon-bigger"></i></a>
          </li>
          <li class="navigation_item">
            <a href="mailto:jenniferyao1996#hotmail.com" target="_blank"><i class="fa fa-envelope icon-bigger"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </aside>

  <main class="content_wrapper">
    <div class="content">
      <article class="post">
        <header>
          <span class="post_category"><span class="date">2021-5-1</label> Angular</span>
            <h2>How to Improve Front-end Performance</h2>
        </header>
        <section class="post_body">
          <div class="alert is-helpful">In this blog , I focus on
            "angular performance". No matter what Web framework we use,
            the performance problems we face and the solutions we offer are almost the same.</div>
          <p>
            Speed and stability are required by all
            apps and websites.&nbsp; For delivering excellent web experiences for large
            audiences,&nbsp;we should try to :
            </ul>
          </p>
          <h3>1, Reduce network traffic</h3>
          <div>
            <ul>
              <li>Bundling</li>
              <li>Code Splitting</li>
              <li><span class="fw-600">Minify:</span>&nbsp;optimize and minify your CSS, <span
                  class="fw-600">Uglify:</span>&nbsp;minify your JavaScript</li>
              <li> Implement Gzip Compression to reduce the size of files</li>
              <li>Tree-shaking</li>
              <li>Use website caching</li>
              <li>lazy loading modules </li>
              <li class="collapsible">RxJS operators: debounce, ReplaySubject &nbsp;<i
                  class="fa fa-arrow-down gray icon-bigger"></i>
                <dl class="collapsible_content">
                  <dt class="fw-600">debounce</dt>
                  <dd>discard emitted values that take less than the specified time</dd>
                  <dt class="fw-600">ReplaySubject, shareReplay ,etc.</dt>
                  <dd>Replays or emits old values to new subscribers</dd>
                </dl>
              </li>
              <li>*ngFor + TrackBy</li>
              <li>Unsubscribe from Observables</li>
              <li class="collapsible">Optimize the size of images on your website.Offer responsive images.
                <div>
                  <pre>
&lt;img sizes="(min-width: 1200px) 730w,
            (max-width: 1199px) 610w,
            (max-width: 380px) 350w"
     srcset="/img/blog/responsive-images-lg.png 730w,
             /img/blog/responsive-images-md.png 610w,
             /img/blog/responsive-images-sm.png 350w"
     src="/img/blog/reponsive-images.png"
     alt="responsive images"&gt;

&lt;img sizes="(min-width: 1200px) 730w,
            (max-width: 1199px) 610w,
            (max-width: 380px) 350w"
     srcset="/img/blog/responsive-images-lg.png 730w 1x,
             /img/blog/responsive-images-lg@2x.png 730w 2x,
             /img/blog/responsive-images-md.png 610w 1x,
             /img/blog/responsive-images-md@2x.png 610w 2x,
             /img/blog/responsive-images-sm.png 350w 1x,
             /img/blog/responsive-images-sm@2x.png 350w 2x"
     src="/img/blog/reponsive-images.png"
     alt="responsive images"&gt;
                 </pre>

                  <pre>
&lt;picture&gt;
    &lt;source sizes="(min-width: 1200px) 730w" srcset="/img/blog/responsive-images-lg.png 730w"&gt;
    &lt;source sizes="(max-width: 1199px) 610w" srcset="/img/blog/responsive-images-md.png 610w"&gt;
    &lt;source sizes="(max-width: 380px) 350w" srcset="/img/blog/responsive-images-sm.png 350w"&gt;
    &lt;img src="/img/blog/reponsive-images.png" alt="responsive images" class="img-fluid rounded"&gt;
&lt;/picture&gt;
// reference: https://www.keycdn.com/blog/responsive-images
                </pre>
                </div>
              </li>
              <li>SSR: Server Side Rendering</li>
            </ul>
          </div>
          <h3>2, Reduce the rendering time </h3>
          <div class="alert is-helpful">It's commonly accepted that 60 frames per second is the rate at which
            animations will appear smooth. For a rate of 60 frames per second,
            the browser has 16.7 milliseconds to execute scripts,
            recalculate styles and layout if needed, and repaint the area being updated.
            <div class="divider_transparent"></div>
            <span class="fw-600">Repaint</span> effects the visibility of an element but doe
            s not affects layout. &nbsp;
            <span class="fw-600">Reflow</span> means re-calculating the positions and geometries of elements in
            the document, for the purpose of re-rendering part or all of the document.
          </div>
          <ul>
            <li>preloading modules</li>
            <li>AOT Compilation</li>
            <li>Service Worker</li>
            <li>Web Worker. OffscreenCanvas can allow us to paint on screen from within a web worker. So animation will
              not block the main tread.</li>
            <li>Resolve guards</li>
            <li>OnPush Change Detection for a
              component:&nbsp;<code> changeDetection: ChangeDetectionStrategy.OnPush</code></li>
            <li>using pure pipes</li>
            <li>minimize browser reflow and repaint
              <img src="assets/dom-cssom-render-tree.jpeg" alt="css js render-tree" />
              <ol><span class="fw-600">The operations trigger reflow:</span>
                <li>add ,modify, delete DOM visible elements in Javascript code</li>
                <li>change size or position of an element </li>
                <li>change the content of an element, e.g. text length or image size</li>
                <li>change font-size</li>
                <li>use table layout</li>
                <li>activate CSS pseudo-classes,e.g. :hover</li>
                <li>query some properties or call some methods.
                  <pre>
→ clientWidth、clientHeight、clientTop、clientLeft
→ offsetWidth、offsetHeight、offsetTop、offsetLeft
→ scrollWidth、scrollHeight、scrollTop、scrollLeft
→ scrollIntoView()、scrollIntoViewIfNeeded()
→ getComputedStyle()
→ getBoundingClientRect()
→ scrollTo()
                      </pre>
                </li>
              </ol>

              <span class="fw-600">The operations trigger repaint</span>
              (&nbsp;repaint is less expensive than reflow ):
              <hr class="divider_transparent" />
              <code>change color, background-color, visibility, etc.</code>
            </li>
            <li>Optimization methods:
              <ol>
                <li>don't use table layout</li>
                <li>change the class of the lowest node of the DOM tree</li>
                <li>don't use multiple layer inline styles</li>
                <li>set the position of animations as absolute or fixed</li>
                <li>don't use CSS calculate, e.g. calc() </li>
                <li>call window.requestAnimationFrame() for animations</li>
                <li>replace style attribute with a common CSS class when styling elements</li>
              </ol>
            </li>
            <li> Eliminate render-blocking resources
              <div class="alert is-helpful">HTML markup is transformed into a Document Object Model (DOM); CSS markup is
                transformed into a CSS Object Model (CSSOM).
                DOM and CSSOM are independent data structures;the CSSOM and DOM trees are combined into a render tree
              </div>
              JavaScript code block all constructing and rendering,&nbsp;CSS block a part of them <ul>
                <li>Javascript block DOM and CSSOM constructing,&nbsp;then
                  block render-tree constructing and block download of static files, e.g. images.
                  We should put the script tag just before body , if not, put them in head portion with "defer" or
                  "async" attribute
                  <pre>
// a .html file
//  async and defer attributes should put in head portion of the page.
//  they are useless if you put the script in the body footer.

// When a page loads a script with defer,
// the script is fetched asynchronously, and it’s executed only after the HTML parsing is done.

// When a page loads a script with async,
// The script is fetched asynchronously, and when it’s ready the HTML parsing is paused to execute the script,
// then it’s resumed.

&lt;head&gt;
<!-- async attribute -->

  &lt;script defer src="some.js"&gt;&lt;/script&gt;
  &lt;script async src="some.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
&lt;body&gt;
  ...
  ...
  &lt;script src="some.js"&gt;&lt;/script&gt;
&lt;/body&gt;
      </pre>
                </li>
                <li>CSS files block neither HTML files parsing or DOM constructing.
                  They block CSSOM constructing, then block the render-tree constructing.
                  We can put CSS link in head.
                  <pre>
 // some.html
&lt;html>
   &lt;head&gt;
   &lt;link
      href="xxxx.css"
      rel="stylesheet"
    /&gt;
   &lt;/head&gt;
   &lt;body&gt;

   &lt;/body&gt;
 &lt;/html&gt;
                      </pre>
                </li>
                <li>CSS files don't block others files executing. They block Javascript files executing.</li>
              </ul>
            </li>
          </ul>


          <h3>Conclusion:</h3>
          <ul>
            <li>reduce network traffic</li>
            <li>reduce rendering time</li>
          </ul>
          Reference: <a href="https://flaviocopes.com/javascript-async-defer/#async-and-defer" alt="async defer"
            target="_blank"
            rel="noopener noreferrer">https://flaviocopes.com/javascript-async-defer/#async-and-defer</a>
        </section>
      </article>
      <section class="read-more">
        <div class="read-more_item">
          <span class="read-more-item-dim">&lt;&lt;previous article</span>
          <h3>
            <a href="angular_rxjs.html">Most commonly used RxJS Operators</a>
          </h3>
        </div>
        <div class="read-more_item">
          <span class="read-more-item-dim">next article&gt;&gt;</span>
          <h3>
            <a href="front_end_security.html">Imporve Front-end Security</a>
          </h3>
        </div>
      </section>

      <section class="footer">
        <span class="footer__copyright">2021-5-31 Jennifer. All rights reserved.</span>
        <span class="footer__copyright">Contact Email: Jenniferyao1996#hotmail.com</span>
      </section>
    </div>
    <span id="backToTop">
      <i class="fa fa-arrow-up"></i>
    </span>
  </main>
  <script src="main.js"></script>
</body>

</html>